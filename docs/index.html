<!DOCTYPE html>
<html lang="en">
  <!-- 
      ðŸ‘‹ WELCOME! 
      Need help? Visit: https://github.com/valgaze/extension-toolkit/blob/main/README.md#setup
      
      ðŸ”” Note: This is the static PRODUCTION version where you import a bundled extension file- use npm run dev or npm run storybook for development with live-reload and other nice things
    -->
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ðŸš€ Voiceflow Extensions</title>
    <style>
      :root {
        --primary-color: #6366f1;
        --secondary-color: #818cf8;
        --bg-gradient: linear-gradient(135deg, #6366f1 0%, #818cf8 100%);
      }

      body {
        margin: 0;
        padding: 0;
        min-height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        background: #f8fafc;
        color: #1e293b;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
      }

      .hero {
        text-align: center;
        padding: 4rem 2rem;
        background: var(--bg-gradient);
        color: white;
        margin-bottom: 2rem;
        border-radius: 0 0 2rem 2rem;
        box-shadow: 0 10px 30px -10px rgba(99, 102, 241, 0.4);
      }

      .hero h1 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        font-weight: 800;
      }

      .hero p {
        font-size: 1.2rem;
        opacity: 0.9;
        max-width: 600px;
        margin: 0 auto;
      }

      .toolkit-description {
        background: white;
        padding: 2rem;
        border-radius: 1rem;
        margin: 2rem auto;
        max-width: 800px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      }

      .storybook-button {
        display: block;
        margin: 3rem auto;
        padding: 1.5rem 3rem;
        font-size: 1.4rem;
        color: white;
        text-decoration: none;
        background: var(--primary-color);
        border-radius: 1rem;
        transition: all 0.3s ease;
        box-shadow: 0 4px 6px -1px rgba(99, 102, 241, 0.4);
        text-align: center;
        max-width: 400px;
      }

      .storybook-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.4);
        background: var(--secondary-color);
      }

      .get-started-link {
        display: block;
        margin: 2rem auto;
        padding: 1.5rem 3rem;
        font-size: 1.4rem;
        color: white;
        text-decoration: none;
        background: #22c55e;
        border-radius: 1rem;
        transition: all 0.3s ease;
        box-shadow: 0 4px 6px -1px rgba(34, 197, 94, 0.4);
        text-align: center;
        max-width: 400px;
      }

      .get-started-link:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px rgba(34, 197, 94, 0.4);
        background: #16a34a;
      }

      .button-group {
        display: flex;
        gap: 2rem;
        flex-wrap: wrap;
        justify-content: center;
        margin: 3rem auto;
        max-width: 900px;
      }

      .button-group a {
        flex: 1;
        min-width: 300px;
      }

      .environment-badge {
        display: inline-block;
        padding: 0.5rem 1rem;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 2rem;
        backdrop-filter: blur(10px);
        margin-top: 1rem;
      }

      .features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        padding: 2rem;
      }

      .feature-card {
        background: white;
        padding: 2rem;
        border-radius: 1rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      .feature-card h3 {
        color: var(--primary-color);
        margin-bottom: 1rem;
      }

      .chat-hint {
        position: fixed;
        bottom: 100px;
        right: 20px;
        background: white;
        padding: 1rem;
        border-radius: 1rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        animation: bounce 2s infinite;
        z-index: 1000;
      }

      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      #app {
        min-height: 400px;
      }

      .zero-deps {
        display: inline-block;
        background: #22c55e;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 2rem;
        font-weight: 600;
        margin: 1rem 0;
      }
    </style>
  </head>
  <body>
    <div class="hero">
      <h1>ðŸš€ Extension Toolkit</h1>
      <p>Build powerful, type-safe extensions for Voiceflow chat widgets</p>
      <span class="zero-deps">âœ¨ Use any framework/library</span>
      <div class="environment-badge">
        Environment: production
      </div>
    </div>

    <div class="container">
      <div class="toolkit-description">
        <p>
          A lightweight toolkit for building Voiceflow chat widget extensions
          using your favorite framework. Includes hot reloading, type safety,
          and built-in debugging tools.
        </p>
      </div>

      <div class="button-group">
        <a
          href="https://github.com/valgaze/extension-toolkit?tab=readme-ov-file#setup"
          class="get-started-link"
          target="_blank"
        >
          ðŸš€ Get Started â†’
        </a>
        <a href="./storybook.html" class="storybook-button">
          ðŸ“š Open Storybook Explorer âœ¨
        </a>
      </div>

      <div class="features">
        <div class="feature-card">
          <h3>ðŸ’¡ Type Safety</h3>
          <p>Catch errors before runtime with TypeScript integration</p>
        </div>
        <div class="feature-card">
          <h3>ðŸ”¥ Hot Reload</h3>
          <p>Rapid development with instant updates</p>
        </div>
        <div class="feature-card">
          <h3>ðŸ§ª Easy Testing</h3>
          <p>Test extensions in isolation or with live widget</p>
        </div>
      </div>

      <div class="chat-hint">ðŸ‘‡ Click the chat button to start</div>

      <div id="app"></div>
    </div>

    <!-- Load your extensions -->
    <script type="module">
      // ðŸ‘‰ Add your Voiceflow project ID here
      const PROJECT_ID = "6799a2f4d49283acc8d580ac";

      if (PROJECT_ID === "__PLACEHOLDER__" || !PROJECT_ID) {
        throw new Error("Add your PROJECT_ID to continue");
      }

      // Import the extension(s)
      import { FormExtension,RecorderExtension,VideoExtension } from "./bundled.js";

      // Initialize Voiceflow Chat Widget
      (function (d, t) {
        var v = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
        v.onload = function () {
          window.voiceflow.chat
            .load({
              verify: { projectID: PROJECT_ID },
              url: "https://general-runtime.voiceflow.com",
              versionID: "production",
              assistant: {
                extensions: [FormExtension,RecorderExtension,VideoExtension],
              },
            })
            .then(() => {
              const urlParams = new URLSearchParams(window.location.search);
              const autoload = urlParams.has("autoload");

              if (autoload) {
                window.voiceflow.chat.open();
              } else {
                window.voiceflow.chat.proactive.push({
                  type: "text",
                  payload: {
                    message: `ðŸ’¡ Click the chat icon below to start an interactive conversation! Remember to hit "Publish" on the Voiceflow canvas to see your latest updates.`,
                  },
                });
              }
            })
            .catch((error) => {
              console.error("Error loading Voiceflow chat:", error);
            });
        };
        v.src = "https://cdn.voiceflow.com/widget-next/bundle.mjs";
        v.type = "text/javascript";
        s.parentNode.insertBefore(v, s);
      })(document, "script");
    </script>
  </body>
</html>
